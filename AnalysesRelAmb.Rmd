---
Title:  "Analyses RelAmb"
Author: "Thomas Verliefde"
Date:   "2018-12-17""
Output: html_document
---

```{r setup, options}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())

lapply(
  c("plyr","dplyr","tidyr","ggplot2","readxl","readr","magrittr"),
  require,
  character.only = T
)
```

#############################
# Importing & Cleaning Data #
#############################

Make sure the relevant datafiles (Data_RelAmb.zip and BAWL-R.xls) are in the working directory.

```{r Data_RelAmb.zip, message=FALSE}

temp <- tempdir()
df_raw <- "Data_RelAmb.zip" %>% {
  ldply(
    .data = unzip(.,list=T) %>% filter(grepl("(.csv)$",.$Name)) %$% Name,
    .fun = function(x) unzip(.,files=x,exdir=temp) %>% read_csv
  )
}
rm(temp)

```

```{r label, options}

df <- df_raw %>%
  select(
    -c(practicePrimes,practiceTrials,experimentPrimes,experimentTrials,hostName)
    ) %>%
  gather(
    "fullTrials",
    "trialsOutput",
    matches("^([a-z])+_(\\d)+_([a-z])+$")
  ) %>%
  gather(
    "fullOthers",
    "otherOutput",
    matches("^(other)(Pos|Neg)(1|2)(_)")
  ) %>%
  separate(
    fullTrials,
    c("Block","Trial","Desc"),
    sep = "_"
    ) %>% group_by(Subject) %>%
  spread(
    key = Desc, value = trialsOutput
  ) %>%
  arrange(Subject)
  


```


Transform primeCat to something readable [0 = positive noun, 1 = negative noun, 2 = positive other, 3 = negative other, 4 = dflksj]
Transform targetCat to something readable [0 = positive adjective, 1 = negative adjective]
Create a "congruent/incongruent" variable
Create a "correct/false" response variable (depending on key [Aneg, Apos], answer [A, L], & targetCat [0, 1])
Create a "exclude/include" variable (based on correct/false and time > 3000 or < 150)



```{r BAWL-R.xls, options}

bawl <- "BAWL-R.xls" %>% read_excel %>%
  mutate(
    WORD_CLASS = recode(
      WORD_CLASS,
      "N" = "NOUN",
      "V" = "VERB",
      "A" = "ADJ"
    )
  )


```